<div id="page-tareas" class="page">
  <main class="panel panel-central">
    <div class="panel-header">
      <h2 id="titulo-tareas-pendientes" class="titulo-panel accent">
        Tareas Pendientes
      </h2>
      <div class="filtros-container">
        <label for="filtro-curso">Curso:</label>
        <select id="filtro-curso" class="filtro-select"></select>
        <button class="btn-filtro" data-sort="fecha">Fecha</button>
        <button class="btn-filtro" data-sort="prioridad">Prioridad</button>
      </div>
    </div>
    <div
      id="tareas-header-contextual"
      class="panel-header contextual"
      style="display: none"
    >
      <span id="seleccion-contador">0 seleccionada(s)</span>
      <div class="actions-group">
        <div
          class="custom-checkbox-container"
          title="Seleccionar Todas/Ninguna"
        >
          <input
            type="checkbox"
            id="seleccionar-todas-tareas"
            data-action="seleccionar-todas"
          />
          <label for="seleccionar-todas-tareas"></label>
        </div>

        <button
          id="btn-completar-seleccionadas"
          class="btn-icon"
          title="Marcar como Completadas"
          data-action="completar-seleccion"
        ></button>

        <button
          id="btn-eliminar-seleccionadas"
          class="btn-icon btn-eliminar-item"
          title="Eliminar Seleccionadas"
          data-action="eliminar-seleccion"
        ></button>

        <button
          id="btn-cancelar-seleccion"
          class="btn-icon"
          title="Cancelar Selección"
          data-action="cancelar-seleccion"
        ></button>
      </div>
    </div>
    <div class="tabla-container">
      <table class="tabla-tareas tabla-tareas-visible">
        <thead>
          <tr>
            <th></th>
            <th data-sort="curso">Curso</th>
            <th data-sort="prioridad" class="col-prioridad">Prioridad</th>
            <th data-sort="titulo">Título</th>
            <th data-sort="fecha">Entrega</th>
            <th class="col-acciones"></th>
          </tr>
        </thead>
        <tbody id="tabla-tareas-body"></tbody>
      </table>
    </div>
  </main>
  <section id="panel-creacion" class="panel">
    <form id="form-nueva-tarea" class="form-panel-tarea">
      <h2 class="titulo-panel accent">Agregar Nueva Tarea</h2>

      <div class="form-row">
        <div class="form-group" style="flex: 1 1 50%">
          <label for="select-curso-tarea">Curso:</label>
          <select id="select-curso-tarea"></select>
        </div>
        <div class="form-group" style="flex: 1 1 50%">
          <label for="select-proyecto-tarea">Proyecto (Opcional):</label>
          <select id="select-proyecto-tarea"></select>
        </div>
      </div>

      <div class="form-group">
        <label for="input-titulo-tarea">Título:</label>
        <input
          type="text"
          id="input-titulo-tarea"
          placeholder="¿Qué necesitas hacer?"
          required
        />
      </div>

      <div class="form-group">
        <label for="input-desc-tarea">Descripción:</label>
        <textarea
          id="input-desc-tarea"
          placeholder="Añade más detalles..."
          rows="4"
        ></textarea>
      </div>

      <div class="form-row">
        <div
          class="form-group"
          style="flex: 1 1 calc(50% - 8px); min-width: 150px"
        >
          <label for="input-fecha-tarea">Fecha:</label>
          <input type="date" id="input-fecha-tarea" required />
        </div>
        <div
          class="form-group"
          style="flex: 1 1 calc(50% - 8px); min-width: 150px"
        >
          <label for="select-prioridad-tarea">Prioridad:</label>
          <select id="select-prioridad-tarea">
            <option value="Baja">Baja</option>
            <option value="Media" selected>Media</option>
            <option value="Alta">Alta</option>
          </select>
        </div>
      </div>

      <button type="submit" id="btn-guardar-tarea" class="btn-accent">
        Guardar Tarea
      </button>
    </form>
  </section>
  <section
    id="panel-detalles"
    class="panel panel-derecho panel-detalles-optimizado"
  >
    <div class="detalle-header-fijo">
      <div class="detalle-titulo-acciones">
        <h3 id="det-titulo">Selecciona una tarea</h3>
        <div class="detalle-acciones-principales">
          <button id="btn-completar-tarea" class="btn-full-width" disabled>
            Marcar como Completada
          </button>
          <button
            id="btn-editar-tarea"
            class="btn-icon"
            title="Editar Tarea"
            disabled
          ></button>
          <button
            id="btn-eliminar-tarea"
            class="btn-icon btn-eliminar-item"
            title="Eliminar Tarea"
            disabled
          ></button>
        </div>
      </div>
      <button
        id="btn-cerrar-detalles"
        class="btn-icon btn-cerrar-panel"
      ></button>
      <hr class="detalle-divisor" />
    </div>

    <div id="detalles-contenido-scrollable">
      <div id="det-proyecto-container" style="display: none">
        <h4>Proyecto:</h4>
        <p id="det-proyecto-nombre"></p>
      </div>

      <h4>Descripción:</h4>
      <p id="det-descripcion" class="detalle-descripcion-box"></p>

      <div class="subtareas-container" style="display: none">
        <h4>Sub-tareas</h4>
        <ul id="lista-subtareas"></ul>
        <div class="form-agregar-subtarea">
          <input
            type="text"
            id="input-nueva-subtarea"
            placeholder="Nueva sub-tarea..."
          />
          <button id="btn-agregar-subtarea" class="btn-accent">+</button>
        </div>
      </div>
    </div>
  </section>
  <button id="btn-abrir-creacion-movil" class="btn-flotante-agregar"></button>
</div>
